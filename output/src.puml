' Generated by UML Generator
' Encoded: tHfhRzisyBj_XT1FpfgemzOEWv4PTMAlC-0qXfsi68R1e2N6OIgBAYcdpRhcjuzFYIyfSLuj-YMEUCTxt_6EqcjQ0b9krbc7laTv0GXOHqa6A1sK9K7BJGd72Sxdw5yO_TWvHocC4aII37Ow0YkQ4fnkadAUm1mGX6SWJ_7w1D8o-jo9ehr2WI6vH0diLUZocMDiA2GL-BH-u30YgFKYIJNwBShXH_NGtU48U-pFDKNhJGPAA05Q4jhTwKMN6AMTBrhM0v2yXtawA8eC9Q14EEU2KY7fDTEoX9_A2GPfOAiXc5JiCxDRYP8lKOPNAqXw4IQh61GWEOSnNqBvYl--l8Wd0e49tuPn17B0iE8LB2L-r-0O2nbsjBNe31QOeXAJgrwKu7Myb7fLlwI2nwSslhRPSv2c7DJTX2d0l4GbWbJitxa5JcqfsyDFP2oRgM4l5NzRM6pgxgXinjWDiap1QPUxOfpsc4xvYfde0bo2U5EYB9uWMkwtMapHw2kgwl7WQfnsaQAu6pNIFovuw8BizZnIcC4ItegD27ksPLEaeDfYeETW3PKm6M1EcRCgmTSB8XAu1WpnPfd1tGX-AY0HoJPa11K6_P35_B6HFOjFpVkHETRx9sp1Y-D3LXO8pZ8MbC625l81LM7e5xjG717uOSFAK9XKKh4t_bseBGkyl8196R-n2CuaS4Tc6IsujSvOMOSVCNaVdvTb4SyWBN1EuOW7ozN-NK8t5BiFeacLVzjgSOzikB_WGvDcBNiuc-xFxjIavxCpikTnUTNdOm199Wml7KwEiTLmKii42wOr1mKJszckizjdgNEF-Nid07zE1SWNrx0hs_sM2MxlhtXp2W8SLiwcC-LgseGgHJaX2MymXatgLAZSg9G2XmrZKnfP1cvHqq6yoJ5Uk8JIfIrS7jkh3s72IZclY7rFcla7ZMoVpLFLbBxcdpLopKAy1bKDiwpu5Gl7TvhwrepZjZlMTDRMwpYJsrs6Z0Svw3cjVjl89_HwNaqaQu3oBY0hwdljxtyy4wc8V9gJJRUit_NXrN3a6BhVzhpHMu9nVJUFGHOTMOCp6MKMeMaOoiRJNeJoyjjptOYhr7Qo2tY3uauKA1EqKAjGcirbq2onN6eYo0UdbR22D2tdm1UqjGtFioT8pa028s-Ub-VL6M9L8QijiVtaBaXOm_JzflJhfncvQtjVMuDGLqssDzHgXHqqjNFPL1lwuAezFhUuNff1aAfqlixmYavG3bdjFkHdLi9LtfTK--gsS408k19-xOihm-i240hJ2LxPkwPycJJjaaaiUOi56V-Q4eyYdrOjDCSPi5YugYfHVIE6rgWKqSjO_ron2frFZQVI4QQYGkOKNMftZhdlmH9GzmhkT3RHf1Z7PnVfCkanZvKh0bc8z5wyo702idEsqdlrykUVNWm79uF5mM0-MWocusSsgVbePj9Y28l1y6ZyraQR3kRpTyUpeOcwEcCd-TdY4c-onSjNl_xopDUS1qvGizGnDo-MmjXWIKi2sF6i3clX1Xag9sWDvoLO5re8liZSCe6NC3FNnDQt8b3hnJKipt7ghehBSfP0X9ghkjaogx-KfClYbOUhnXPnXAZgchXIIump278LNvNC76ILrHfIkdhP9Lfhw56e09bZ0tl_eRQ6Hw26U1QpIHnLjlDe623VmkvPestjKJ50laUQscLrW9WdZY8Q6ECEhb1g19E-0pIy779wQ7ym1EfRD4isQYxRB6_Gok_yxJrjMjTZ5ozQfjQv7VwwdKsh9jOnWdiArJk5UKACcimJqj3gCLEtixp91C7ESvihZb1u1OFSEFbQM-dAZZS5vM0oAS8UQeZ2q8PjB7tdMB9kULnXKNlsDEnjajkLMNLbZvihrgLdYtutPexGk87QVJL-Wg3a1cHodw4Cse6e9onsmEGbgycYesAgZVXpOwy5nB5-Y3TYpn4ezdN7EsQjvghkqlu0z9o3pHxDa4LwT2Z5y0DSpr-y50ZvnA8beHuw384uaY6IbaXTTuXjNQ4kPo39XDu32FcOPtkgI_5wEhrPNbVmOvuwxSjpnQPUq25N4VaTapN8PDjgEkYQi2MfbPrrWGtMBTrk18R3nNHsF3mzF15RTwFLw6J1IenUdQlbpPHrZYC7DnrDHjuY9w1M5WT_BRZ7U1GhuyygKNMyExE0oXWbxXkOypgDZP985SXg6equwOiSnUib9CTdOeQnZTBAfdih3co8MvfQYStG_Cp0wLsb8u99fMzO1uud-DgRa2yuuDJt1byU-lxGP7oFE57oZSJ7jXVCAgLhCPtx10FWwcAJS6rjq_6WGJCuXvDb4kUGic41wzcqRC_Qj1nOmEY-ffO3V5LjS8F7t1htZg3gm7kyz6tZyb3PQoQju6UNsuzygRdUMZk-TZwzgsNr2YxlIiOvVoki7BJTFOMQTFz4udv84hZa3uTodEmcyfSvGlwpVzBtBpl4f2YbO3A6Y4cKxfhJaV_RX9g_MVjXRy_zHAqTsNpjONuZfc7cjrScF8xx0jvnFfSo131s-j-YD0jg874cmLTspRZsAxS6lD3RsmRKq7S17UT5KyYEBXd3LCO58mUfrOvx-LXjKpU6c5jCz5gTu6I_j_TVNoC4Xs0JeMaCCt6QfXyJfsc2i72CxfeheJj32o0i8V53JP-WPntRdVRc2IkVQEpMKkqYX-fWG8BNC4ytw-n_
' URL: http://www.plantuml.com/plantuml/uml/tHfhRzisyBj_XT1FpfgemzOEWv4PTMAlC-0qXfsi68R1e2N6OIgBAYcdpRhcjuzFYIyfSLuj-YMEUCTxt_6EqcjQ0b9krbc7laTv0GXOHqa6A1sK9K7BJGd72Sxdw5yO_TWvHocC4aII37Ow0YkQ4fnkadAUm1mGX6SWJ_7w1D8o-jo9ehr2WI6vH0diLUZocMDiA2GL-BH-u30YgFKYIJNwBShXH_NGtU48U-pFDKNhJGPAA05Q4jhTwKMN6AMTBrhM0v2yXtawA8eC9Q14EEU2KY7fDTEoX9_A2GPfOAiXc5JiCxDRYP8lKOPNAqXw4IQh61GWEOSnNqBvYl--l8Wd0e49tuPn17B0iE8LB2L-r-0O2nbsjBNe31QOeXAJgrwKu7Myb7fLlwI2nwSslhRPSv2c7DJTX2d0l4GbWbJitxa5JcqfsyDFP2oRgM4l5NzRM6pgxgXinjWDiap1QPUxOfpsc4xvYfde0bo2U5EYB9uWMkwtMapHw2kgwl7WQfnsaQAu6pNIFovuw8BizZnIcC4ItegD27ksPLEaeDfYeETW3PKm6M1EcRCgmTSB8XAu1WpnPfd1tGX-AY0HoJPa11K6_P35_B6HFOjFpVkHETRx9sp1Y-D3LXO8pZ8MbC625l81LM7e5xjG717uOSFAK9XKKh4t_bseBGkyl8196R-n2CuaS4Tc6IsujSvOMOSVCNaVdvTb4SyWBN1EuOW7ozN-NK8t5BiFeacLVzjgSOzikB_WGvDcBNiuc-xFxjIavxCpikTnUTNdOm199Wml7KwEiTLmKii42wOr1mKJszckizjdgNEF-Nid07zE1SWNrx0hs_sM2MxlhtXp2W8SLiwcC-LgseGgHJaX2MymXatgLAZSg9G2XmrZKnfP1cvHqq6yoJ5Uk8JIfIrS7jkh3s72IZclY7rFcla7ZMoVpLFLbBxcdpLopKAy1bKDiwpu5Gl7TvhwrepZjZlMTDRMwpYJsrs6Z0Svw3cjVjl89_HwNaqaQu3oBY0hwdljxtyy4wc8V9gJJRUit_NXrN3a6BhVzhpHMu9nVJUFGHOTMOCp6MKMeMaOoiRJNeJoyjjptOYhr7Qo2tY3uauKA1EqKAjGcirbq2onN6eYo0UdbR22D2tdm1UqjGtFioT8pa028s-Ub-VL6M9L8QijiVtaBaXOm_JzflJhfncvQtjVMuDGLqssDzHgXHqqjNFPL1lwuAezFhUuNff1aAfqlixmYavG3bdjFkHdLi9LtfTK--gsS408k19-xOihm-i240hJ2LxPkwPycJJjaaaiUOi56V-Q4eyYdrOjDCSPi5YugYfHVIE6rgWKqSjO_ron2frFZQVI4QQYGkOKNMftZhdlmH9GzmhkT3RHf1Z7PnVfCkanZvKh0bc8z5wyo702idEsqdlrykUVNWm79uF5mM0-MWocusSsgVbePj9Y28l1y6ZyraQR3kRpTyUpeOcwEcCd-TdY4c-onSjNl_xopDUS1qvGizGnDo-MmjXWIKi2sF6i3clX1Xag9sWDvoLO5re8liZSCe6NC3FNnDQt8b3hnJKipt7ghehBSfP0X9ghkjaogx-KfClYbOUhnXPnXAZgchXIIump278LNvNC76ILrHfIkdhP9Lfhw56e09bZ0tl_eRQ6Hw26U1QpIHnLjlDe623VmkvPestjKJ50laUQscLrW9WdZY8Q6ECEhb1g19E-0pIy779wQ7ym1EfRD4isQYxRB6_Gok_yxJrjMjTZ5ozQfjQv7VwwdKsh9jOnWdiArJk5UKACcimJqj3gCLEtixp91C7ESvihZb1u1OFSEFbQM-dAZZS5vM0oAS8UQeZ2q8PjB7tdMB9kULnXKNlsDEnjajkLMNLbZvihrgLdYtutPexGk87QVJL-Wg3a1cHodw4Cse6e9onsmEGbgycYesAgZVXpOwy5nB5-Y3TYpn4ezdN7EsQjvghkqlu0z9o3pHxDa4LwT2Z5y0DSpr-y50ZvnA8beHuw384uaY6IbaXTTuXjNQ4kPo39XDu32FcOPtkgI_5wEhrPNbVmOvuwxSjpnQPUq25N4VaTapN8PDjgEkYQi2MfbPrrWGtMBTrk18R3nNHsF3mzF15RTwFLw6J1IenUdQlbpPHrZYC7DnrDHjuY9w1M5WT_BRZ7U1GhuyygKNMyExE0oXWbxXkOypgDZP985SXg6equwOiSnUib9CTdOeQnZTBAfdih3co8MvfQYStG_Cp0wLsb8u99fMzO1uud-DgRa2yuuDJt1byU-lxGP7oFE57oZSJ7jXVCAgLhCPtx10FWwcAJS6rjq_6WGJCuXvDb4kUGic41wzcqRC_Qj1nOmEY-ffO3V5LjS8F7t1htZg3gm7kyz6tZyb3PQoQju6UNsuzygRdUMZk-TZwzgsNr2YxlIiOvVoki7BJTFOMQTFz4udv84hZa3uTodEmcyfSvGlwpVzBtBpl4f2YbO3A6Y4cKxfhJaV_RX9g_MVjXRy_zHAqTsNpjONuZfc7cjrScF8xx0jvnFfSo131s-j-YD0jg874cmLTspRZsAxS6lD3RsmRKq7S17UT5KyYEBXd3LCO58mUfrOvx-LXjKpU6c5jCz5gTu6I_j_TVNoC4Xs0JeMaCCt6QfXyJfsc2i72CxfeheJj32o0i8V53JP-WPntRdVRc2IkVQEpMKkqYX-fWG8BNC4ytw-n_
' Generated on: 2025-12-03T14:40:42.966889984

@startuml cc
skinparam classAttributeIconSize 0
hide circle

class ProductScenarioRandomTest {
  -productService: ProductService
  -userService: UserService
  -random: Random = new Random()
  --
  ~simulateRandomScenarios(): void
}

class BackendApplicationTests {
  ~contextLoads(): void
}

class UserService {
  -{static} logger: org.apache.logging.log4j.Logger = org.apache.logging.log4j.LogManager.getLogger(UserService.class)
  -usersRepository: com.backend.backend.repository.UsersRepository
  --
  +addUser(u: com.backend.backend.entities.User): com.backend.backend.entities.User
}

class ProductService {
  -{static} logger: org.apache.logging.log4j.Logger = org.apache.logging.log4j.LogManager.getLogger(ProductService.class)
  -productRepository: com.backend.backend.repository.ProductRepository
  --
  +getAllProducts(userId: long): java.util.List<com.backend.backend.entities.Product>
  +getProductById(id: long, userId: long): java.util.Optional<com.backend.backend.entities.Product>
  +deleteProductById(id: long, userId: long): void
  +updateProduct(id: long, name: java.lang.String, price: java.lang.Double, experationDate: java.sql.Date, userId: long): void
  +addProduct(name: java.lang.String, price: java.lang.Double, experationDate: java.sql.Date, userId: long): java.lang.Long
}

class ProductController {
  -productService: com.backend.backend.service.ProductService
  --
  +getAllProducts(request: com.backend.backend.controller.controller_request_object.GetAllProductsRequest): org.springframework.http.ResponseEntity<java.util.List<com.backend.backend.entities.Product>>
  +getProductById(request: com.backend.backend.controller.controller_request_object.GetProductRequest): org.springframework.http.ResponseEntity<com.backend.backend.entities.Product>
  +deleteProductById(request: com.backend.backend.controller.controller_request_object.DeleteProductRequest): void
  +updateProduct(request: com.backend.backend.controller.controller_request_object.UpdateProductRequest): void
  +addProduct(request: com.backend.backend.controller.controller_request_object.UpdateProductRequest): void
}

class UpdateProductRequest {
  -id: java.lang.Long
  -name: java.lang.String
  -price: java.lang.Double
  -experationDate: java.lang.String
  -userId: java.lang.Long
  --
  +getId(): java.lang.Long
  +setId(id: java.lang.Long): void
  +getName(): java.lang.String
  +setName(name: java.lang.String): void
  +getPrice(): java.lang.Double
  +setPrice(price: java.lang.Double): void
  +getUserId(): java.lang.Long
  +setUserId(userId: java.lang.Long): void
  +getExperationDate(): java.lang.String
  +setExperationDate(experationDate: java.lang.String): void
}

class DeleteProductRequest {
  -id: java.lang.Long
  -userId: java.lang.Long
  --
  +getId(): java.lang.Long
  +setId(id: java.lang.Long): void
  +getUserId(): java.lang.Long
  +setUserId(userId: java.lang.Long): void
}

class GetProductRequest {
  -id: java.lang.Long
  -userId: java.lang.Long
  --
  +getId(): java.lang.Long
  +setId(id: java.lang.Long): void
  +getUserId(): java.lang.Long
  +setUserId(userId: java.lang.Long): void
}

class GetAllProductsRequest {
  ~userId: long
  --
  +getUserId(): long
  +setUserId(userId: long): void
}

class AddProductRequest {
  -name: java.lang.String
  -price: java.lang.Double
  -experationDate: java.lang.String
  -userId: java.lang.Long
  --
  +getName(): java.lang.String
  +setName(name: java.lang.String): void
  +getPrice(): java.lang.Double
  +setPrice(price: java.lang.Double): void
  +getUserId(): java.lang.Long
  +setUserId(userId: java.lang.Long): void
}

class UserController {
  -userService: com.backend.backend.service.UserService
  --
  +addUser(u: com.backend.backend.entities.User): org.springframework.http.ResponseEntity<com.backend.backend.entities.User>
}

class BackendApplication {
  +{static} main(args: java.lang.String[]): void
}

class Product {
  -id: java.lang.Long
  -name: java.lang.String
  -price: java.lang.Double
  -experationDate: java.sql.Date
  --
  +getId(): java.lang.Long
  +setId(id: java.lang.Long): void
  +getName(): java.lang.String
  +setName(name: java.lang.String): void
  +getPrice(): java.lang.Double
  +setPrice(price: java.lang.Double): void
  +getExperationDate(): java.sql.Date
  +setExperationDate(experationDate: java.sql.Date): void
}

class User {
  -id: java.lang.Long
  -name: java.lang.String
  -email: java.lang.String
  -password: java.lang.String
  -age: int
  --
  +getId(): java.lang.Long
  +setId(id: java.lang.Long): void
  +getName(): java.lang.String
  +setName(name: java.lang.String): void
  +getEmail(): java.lang.String
  +setEmail(email: java.lang.String): void
  +getPassword(): java.lang.String
  +setPassword(password: java.lang.String): void
  +toString(): java.lang.String
  +getAge(): int
  +setAge(age: int): void
}

interface ProductRepository {
  ~findAll(): java.util.List<com.backend.backend.entities.Product>
  ~findById(id: long): java.util.Optional<com.backend.backend.entities.Product>
  ~updateProduct(id: long, name: java.lang.String, price: java.lang.Double, experationDate: java.sql.Date): void
  ~deleteProduct(product: com.backend.backend.entities.Product): void
}

interface UsersRepository {
  ~findByName(name: java.lang.String): com.backend.backend.entities.User
}

class Reader {
  ~logsLines: Collection<String> = new ArrayList<>()
  ~parsedLogs: Collection<Parser> = new ArrayList<>()
  --
  +Reader()
  +getParsedLogs(): Collection<Parser>
}

class LogsAnalyser {
  -{static} limit: int = 3
  --
  +{static} main(args: String[]): void
}

class MostExpensiveProductInDatabase {
  -{static} URL: String = "jdbc:postgresql://localhost:5432/DATA_BASE_API"
  -{static} USER: String = "API_ADMIN"
  -{static} PASSWORD: String = "gfityf_voul_4586"
  --
  +{static} findMostExpensiveProductId(): Collection<Long>
}

abstract class Parser {
  ~TimeStamp: String
  ~LogLevel: String
  ~className: String
  ~methodName: String
  ~parameters: String
  ~userId: int
  --
  +Parser(logLine: String)
  +isService(): boolean
  +getTimeStamp(): String
  +setTimeStamp(timeStamp: String): void
  +getLogLevel(): String
  +setLogLevel(logLevel: String): void
  +getClassName(): String
  +setClassName(className: String): void
  +getMethodName(): String
  +setMethodName(methodName: String): void
  +getParameters(): String
  +setParameters(parameters: String): void
  +getUserId(): int
  +toString(): String
}

class GetProductByidParser {
  -productId: int
  -userId: int
  --
  +GetProductByidParser(logLine: String)
  +getProductId(): int
  +setProductId(productId: int): void
  +getUserId(): int
  +setUserId(userId: int): void
  +toString(): String
}

class AddProductLogsParser {
  -name: String
  -price: double
  -userId: int
  -experationDate: String
  --
  +AddProductLogsParser(logLine: String)
  +getUserId(): int
  +setPrice(price: double): void
  +setUserId(userId: int): void
  +getExperationDate(): String
  +setExperationDate(experationDate: String): void
  +getName(): String
  +setName(name: String): void
  +getPrice(): double
  +toString(): String
}

class GetALLproductLogsParser {
  -userId: int
  --
  +GetALLproductLogsParser(logLine: String)
  +getUserId(): int
  +setUserId(userId: int): void
  +toString(): String
}

class DeleteProductLogsParser {
  -id: int
  -userId: int
  --
  +DeleteProductLogsParser(logLine: String)
  +getId(): int
  +setId(id: int): void
  +getUserId(): int
  +setUserId(userId: int): void
  +toString(): String
}

class UpdateProductLogsParser {
  -id: int
  -name: String
  -price: double
  --
  +UpdateProductLogsParser(logLine: String)
  +getId(): int
  +setId(id: int): void
  +getName(): String
  +setName(name: String): void
  +getPrice(): double
  +toString(): String
}

class UserProfile {
  -userId: Long
  -events: List<LogEvent> = new ArrayList<>()
  -actionCounts: Map<String, Integer> = new HashMap<>()
  --
  +UserProfile(userID: Long)
  +getUserId(): Long
  +getEvents(): List<LogEvent>
  +getActionCounts(): Map<String,Integer>
  +addEvent(event: LogEvent): void
  +updateProfile(log: Parser): void
}

class LogEvent {
  +timestamp: String
  +event: String
  +id: int
}

class FormalReaderProfile {
  ~readAction: int
  --
  +FormalReaderProfile(userId: long, aDD_PRODUCT: int, gET_ALL_PRODUCTS: int, uPDATE_PRODUCT: int, dELETE_PRODUCT: int, gET_PRODUCT_BY_ID: int)
  +getReadAction(): int
}

class ReaderProductProfileGenerator {
  -usersProfile: Collection<UserProfile>
  -nomberOfUsers: int
  --
  +ReaderProductProfileGenerator(usersProfile: Collection<UserProfile>, nb: int)
  +generate(): void
}

abstract class FormalProfile {
  -userId: long
  -ADD_PRODUCT: int
  -GET_ALL_PRODUCTS: int
  -UPDATE_PRODUCT: int
  -DELETE_PRODUCT: int
  -GET_PRODUCT_BY_ID: int
  --
  +FormalProfile(userId: long, aDD_PRODUCT: int, gET_ALL_PRODUCTS: int, uPDATE_PRODUCT: int, dELETE_PRODUCT: int, gET_PRODUCT_BY_ID: int)
  +getUserId(): long
  +setUserId(userId: long): void
  +getADD_PRODUCT(): int
  +setADD_PRODUCT(aDD_PRODUCT: int): void
  +getGET_ALL_PRODUCTS(): int
  +setGET_ALL_PRODUCTS(gET_ALL_PRODUCTS: int): void
  +getUPDATE_PRODUCT(): int
  +setUPDATE_PRODUCT(uPDATE_PRODUCT: int): void
  +getDELETE_PRODUCT(): int
  +setDELETE_PRODUCT(dELETE_PRODUCT: int): void
  +getGET_PRODUCT_BY_ID(): int
  +setGET_PRODUCT_BY_ID(gET_PRODUCT_BY_ID: int): void
}

class WriteProductProfileGenerator {
  -usersProfile: Collection<UserProfile>
  -nomberOfUsers: int
  --
  +WriteProductProfileGenerator(usersProfile: Collection<UserProfile>, nb: int)
  +generate(): void
}

class FormalWriterProfile {
  ~writeAction: int
  --
  +FormalWriterProfile(userId: long, aDD_PRODUCT: int, gET_ALL_PRODUCTS: int, uPDATE_PRODUCT: int, dELETE_PRODUCT: int, gET_PRODUCT_BY_ID: int)
  +getWriteAction(): int
}

class LogsInjector {
  +{static} main(args: String[]): void
}

class ServiceVisitor {
  +visitCtClass(ctClass: CtClass<T>): void
}

class MethodInjectionVisitor {
  +visitCtMethod(m: CtMethod<T>): void
}

ProductScenarioRandomTest *-- ProductService
ProductScenarioRandomTest *-- UserService
UserService *-- UsersRepository
UserService ..> User
ProductService *-- ProductRepository
ProductController *-- ProductService
ProductController ..> GetAllProductsRequest
ProductController ..> GetProductRequest
ProductController ..> DeleteProductRequest
ProductController ..> UpdateProductRequest
UserController *-- UserService
UserController ..> User
ProductRepository ..> Product
UsersRepository ..> User
Reader o-- Parser
GetProductByidParser --|> Parser
AddProductLogsParser --|> Parser
GetALLproductLogsParser --|> Parser
DeleteProductLogsParser --|> Parser
UpdateProductLogsParser --|> Parser
UserProfile o-- LogEvent
UserProfile ..> Parser
FormalReaderProfile --|> FormalProfile
ReaderProductProfileGenerator o-- UserProfile
WriteProductProfileGenerator o-- UserProfile
FormalWriterProfile --|> FormalProfile
@enduml